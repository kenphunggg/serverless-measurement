apiVersion: serving.knative.dev/v1
kind: Service
metadata:
  name: measure-streaming
  namespace: serverless
spec:
  template:
    metadata:
      annotations:
        autoscaling.knative.dev/window: 100s
        autoscaling.knative.dev/min-scale: '1'
        autoscaling.knative.dev/max-scale: '1'
    spec:
      containers:
      - image: docker.io/lazyken/measure-streaming:v3@sha256:e27e18c001aee1f5bd9ac787a856bd0278b2890b1555b992d4e301a1f72c7e7d
        ports:
        - containerPort: 8080
        env:
        - name: SOURCE_IP
          value: "192.168.17.130:2000"
        resources:
          limits:
            cpu: "100m"    
      nodeSelector:
        kubernetes.io/hostname: cloud-node